# usage: submit_batch_jobs.sh train_T21_suite.input >& output.log &
# then, after completion (optional): submit_batch_jobs.sh --purge
# (will remove ALL non-essential output in current pwd - e.g the intermediate step training files).
# add DOCANA

CONFIG:
  # Final argument should be no. trainopts + 1
  BATCH_INFO:  sbatch  $SBATCH_TEMPLATES/SBATCH_Midway2.TEMPLATE 71

  # Python script to handle training.
  JOBNAME: $PRODUCTS/snpca/train_SALT2.py

  # Base files, used as starting point for training.
  PATH_INPUT_TRAIN: $SNTRAIN_ROOT/SALT2/base_training_files/00_jla_base

  # point to base (unperturbed) calibration files: Instrument and MagSys (aka SALTPATH)
  # this directory should contain a survey.yaml file
  PATH_INPUT_CALIB: $SNTRAIN_ROOT/SALT2/SALT2-2021/data

  # in SALT2.INFO file, write magshift or waveshift for all surveys
  # in list
  SURVEY_LIST_SAMEMAGSYS:  [CFA3, OTHER, CALAN_TOLOLO]
  SURVEY_LIST_SAMEFILTER:  [CFA1, CFA2, CFA3, OTHER, CALAN_TOLOLO]

  # define TRAINOPT variations in calibration
  TRAINOPT:
  # SWOPE2 B V g i r u
  - MAGSHIFT CSP B 0.01
  - MAGSHIFT CSP V 0.01
  - MAGSHIFT CSP g 0.01
  - MAGSHIFT CSP i 0.01
  - MAGSHIFT CSP r 0.01
  - MAGSHIFT CSP u 0.01
  - WAVESHIFT CSP B 1.0
  - WAVESHIFT CSP V 1.0
  - WAVESHIFT CSP g 1.0
  - WAVESHIFT CSP i 1.0
  - WAVESHIFT CSP r 1.0
  - WAVESHIFT CSP u 1.0
 # STANDARD CfA1 B I R U V (magshift only, waveshift covered by CfA3 STANDARD)
  - MAGSHIFT CfA1 B 0.01
  - MAGSHIFT CfA1 I 0.01
  - MAGSHIFT CfA1 R 0.01
  - MAGSHIFT CfA1 U 0.01
  - MAGSHIFT CfA1 V 0.01
 # STANDARD CfA2 B I R U V (magshift only, waveshift covered by CfA3 STANDARD)
  - MAGSHIFT CfA2 B 0.01
  - MAGSHIFT CfA2 I 0.01
  - MAGSHIFT CfA2 R 0.01
  - MAGSHIFT CfA2 U 0.01
  - MAGSHIFT CfA2 V 0.01
  #4SHOOTER2 B I R Us V
  - MAGSHIFT CfA3_4SHOOTER2 B 0.01
  - MAGSHIFT CfA3_4SHOOTER2 I 0.01
  - MAGSHIFT CfA3_4SHOOTER2 R 0.01
  - MAGSHIFT CfA3_4SHOOTER2 Us 0.01
  - MAGSHIFT CfA3_4SHOOTER2 V 0.01
  - WAVESHIFT CfA3_4SHOOTER2 B 1.0
  - WAVESHIFT CfA3_4SHOOTER2 I 1.0
  - WAVESHIFT CfA3_4SHOOTER2 R 1.0
  - WAVESHIFT CfA3_4SHOOTER2 Us 1.0
  - WAVESHIFT CfA3_4SHOOTER2 V 1.0
  # KEPLERCAM B Us V i r
  - MAGSHIFT CfA3_KEPLERCAM B 0.01
  - MAGSHIFT CfA3_KEPLERCAM Us 0.01
  - MAGSHIFT CfA3_KEPLERCAM V 0.01
  - MAGSHIFT CfA3_KEPLERCAM i 0.01
  - MAGSHIFT CfA3_KEPLERCAM r 0.01
  - WAVESHIFT CfA3_KEPLERCAM B 1.0
  - WAVESHIFT CfA3_KEPLERCAM Us 1.0
  - WAVESHIFT CfA3_KEPLERCAM V 1.0
  - WAVESHIFT CfA3_KEPLERCAM i 1.0
  - WAVESHIFT CfA3_KEPLERCAM r 1.0
  # STANDARD B I R U V
  - MAGSHIFT CfA3_STANDARD B 0.01
  - MAGSHIFT CfA3_STANDARD I 0.01
  - MAGSHIFT CfA3_STANDARD R 0.01
  - MAGSHIFT CfA3_STANDARD U 0.01
  - MAGSHIFT CfA3_STANDARD V 0.01
  - WAVESHIFT CfA3_STANDARD B 0.01
  - WAVESHIFT CfA3_STANDARD I 0.01
  - WAVESHIFT CfA3_STANDARD R 0.01
  - WAVESHIFT CfA3_STANDARD U 0.01
  - WAVESHIFT CfA3_STANDARD V 0.01
  # SDSS g i r u z
  - MAGSHIFT SDSS g 0.01
  - MAGSHIFT SDSS i 0.01
  - MAGSHIFT SDSS r 0.01
  - MAGSHIFT SDSS u 0.01
  - MAGSHIFT SDSS z 0.01
  - WAVESHIFT SDSS g 1.0
  - WAVESHIFT SDSS i 1.0
  - WAVESHIFT SDSS r 1.0
  - WAVESHIFT SDSS u 1.0
  - WAVESHIFT SDSS z 1.0
  #MEGACAMPSF g i r z
  - MAGSHIFT SNLS g 0.01
  - MAGSHIFT SNLS i 0.01
  - MAGSHIFT SNLS r 0.01
  - MAGSHIFT SNLS z 0.01
  - WAVESHIFT SNLS g 1.0
  - WAVESHIFT SNLS i 1.0
  - WAVESHIFT SNLS r 1.0
  - WAVESHIFT SNLS z 1.0

  # where to save output
  OUTDIR: /home/patricka/University/Astrophysics/PhD/jacobian/outputs/T21_suite_output/

#END_YAML

